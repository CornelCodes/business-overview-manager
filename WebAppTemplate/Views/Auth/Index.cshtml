@model WebAppTemplate.Controllers.AuthViewModel
@{
}

<div class="container-fluid" id="auth-page">
    @if (!string.IsNullOrWhiteSpace(Model.Error))
    {
        <div class="text-center" id="error-display">
            <h3 class="text-danger">@Model.Error?</h3>
        </div>
    }

    @*add toggle view password feature*@
    <div class="container-fluid text-center" id="register-form" v-if="authMethod && authMethod === 'register'">
        <h1>Register</h1>
        <form action="/Auth/Register" method="post">
            <div class="d-flex flex-column justify-content-center align-items-center">
                <label class="form-label">
                    Email
                    <input class="form-control" type="email" name="Email" value="@Model.Email" placeholder="Enter email..." />
                </label>

                <label class="form-label">
                    Password
                    <input class="form-control" type="password" name="Password" value="@Model.Password" placeholder="Enter password..." />
                </label>
                <button type="submit" class="btn btn-primary">Register</button>
            </div>
        </form>
    </div>
    <div class="container-fluid text-center" id="login-form" v-if="authMethod && authMethod === 'login'">
        <h1>Login</h1>
        <form action="/Auth/Login" method="post">
            <div class="d-flex flex-column justify-content-center align-items-center">
                <label class="form-label">
                    Email
                    <input class="form-control" type="email" name="Email" value="@Model.Email" placeholder="Enter email..." />
                </label>

                <label class="form-label">
                    Password
                    <input class="form-control" type="password" name="Password" value="@Model.Password" placeholder="Enter password..." />
                </label>
                <button type="submit" class="btn btn-primary">Login</button>
            </div>
        </form>
    </div>
    <div class="container-fluid d-flex justify-content-center">
        <a class="m-2" v-on:click="changeAuthMethod('login')">Login</a>
        <a class="m-2" v-on:click="changeAuthMethod('register')">Register</a>
    </div>
    <div class="container-fluid text-center p-5" v-if="!authMethod">
        <h1>Loading...</h1>
    </div>
</div>

@section scripts{
    <script>
        var auth = new Vue({
            el: "#auth-page",
            data() {
                return {
                    authMethod: null,
                }
            },
            methods: {
                changeAuthMethod(authMethod) {
                    this.authMethod = authMethod;
                }
            },
            beforeMount() {
                console.log("Init");

                this.authMethod = "login";
            }
        })
    </script>
}
